<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Review Service API</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
        }
        .api-section {
            margin: 20px 0;
            padding: 20px;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .endpoint {
            background-color: #e8f4f8;
            padding: 10px;
            margin: 10px 0;
            border-radius: 5px;
            font-family: monospace;
        }
        .method {
            display: inline-block;
            padding: 2px 8px;
            border-radius: 3px;
            font-weight: bold;
            margin-right: 10px;
        }
        .get { background-color: #4CAF50; color: white; }
        .post { background-color: #2196F3; color: white; }
        .put { background-color: #FF9800; color: white; }
        .delete { background-color: #f44336; color: white; }
        .example {
            background-color: #f0f0f0;
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
            font-family: monospace;
            white-space: pre-wrap;
        }
        button {
            background-color: #3498db;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover {
            background-color: #2980b9;
        }
        #result {
            background-color: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 5px;
            padding: 15px;
            margin: 20px 0;
            min-height: 100px;
            font-family: monospace;
            white-space: pre-wrap;
        }
        .rating {
            color: #f39c12;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>‚≠ê Review Service API</h1>
        <p>–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ Review Service! –≠—Ç–æ—Ç –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–∑—ã–≤–∞–º–∏ –æ –º–µ—Å—Ç–∞—Ö, –ª—é–¥—è—Ö –∏ –¥—Ä—É–≥–∏—Ö –æ–±—ä–µ–∫—Ç–∞—Ö.</p>
        
        <div class="api-section">
            <h2>üìã –î–æ—Å—Ç—É–ø–Ω—ã–µ API Endpoints</h2>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <strong>/api/reviews</strong> - –ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç–∑—ã–≤—ã
            </div>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <strong>/api/reviews/{id}</strong> - –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤ –ø–æ ID
            </div>
            
            <div class="endpoint">
                <span class="method post">POST</span>
                <strong>/api/reviews</strong> - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –æ—Ç–∑—ã–≤
            </div>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <strong>/api/reviews/user/{userId}</strong> - –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            </div>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <strong>/api/reviews/reviewable/{reviewableId}</strong> - –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤—ã –æ–±—ä–µ–∫—Ç–∞
            </div>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <strong>/api/reviews/type/{reviewType}</strong> - –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤—ã –ø–æ —Ç–∏–ø—É
            </div>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <strong>/api/reviews/reviewable/{reviewableId}/type/{reviewType}</strong> - –û—Ç–∑—ã–≤—ã –æ–±—ä–µ–∫—Ç–∞ –ø–æ —Ç–∏–ø—É
            </div>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <strong>/api/reviews/reviewable/{reviewableId}/type/{reviewType}/average</strong> - –°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥
            </div>
            
            <div class="endpoint">
                <span class="method get">GET</span>
                <strong>/api/reviews/reviewable/{reviewableId}/type/{reviewType}/count</strong> - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤
            </div>
            
            <div class="endpoint">
                <span class="method put">PUT</span>
                <strong>/api/reviews/{id}</strong> - –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–∑—ã–≤
            </div>
            
            <div class="endpoint">
                <span class="method delete">DELETE</span>
                <strong>/api/reviews/{id}</strong> - –£–¥–∞–ª–∏—Ç—å –æ—Ç–∑—ã–≤
            </div>
        </div>

        <div class="api-section">
            <h2>üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API</h2>
            <button onclick="getAllReviews()">–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –æ—Ç–∑—ã–≤—ã</button>
            <button onclick="getReviewById(1)">–ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤ #1</button>
            <button onclick="createReview()">–°–æ–∑–¥–∞—Ç—å –æ—Ç–∑—ã–≤</button>
            <button onclick="getReviewsByUser(1)">–û—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è #1</button>
            <button onclick="getReviewsByType('PLACE')">–û—Ç–∑—ã–≤—ã –æ –º–µ—Å—Ç–∞—Ö</button>
            <button onclick="getAverageRating(1, 'PLACE')">–°—Ä–µ–¥–Ω–∏–π —Ä–µ–π—Ç–∏–Ω–≥ –º–µ—Å—Ç–∞ #1</button>
            <button onclick="getReviewCount(1, 'PLACE')">–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∑—ã–≤–æ–≤ –º–µ—Å—Ç–∞ #1</button>
            
            <div id="result"></div>
        </div>

        <div class="api-section">
            <h2>üìù –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è –æ—Ç–∑—ã–≤–∞</h2>
            <div class="example">POST /api/reviews
Content-Type: application/json

{
  "content": "–û—Ç–ª–∏—á–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞! –ö—Ä–∞—Å–∏–≤—ã–µ –≤–∏–¥—ã –∏ —Ö–æ—Ä–æ—à–∞—è –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞.",
  "rating": 5,
  "userId": 1,
  "reviewableId": 1,
  "reviewType": "PLACE"
}</div>
        </div>

        <div class="api-section">
            <h2>üè∑Ô∏è –¢–∏–ø—ã –æ—Ç–∑—ã–≤–æ–≤</h2>
            <ul>
                <li><strong>PLACE</strong> - –ú–µ—Å—Ç–∞</li>
                <li><strong>PERSON</strong> - –õ—é–¥–∏</li>
                <li><strong>TRIP</strong> - –ü–æ–µ–∑–¥–∫–∏</li>
                <li><strong>ACCOMMODATION</strong> - –†–∞–∑–º–µ—â–µ–Ω–∏–µ</li>
                <li><strong>RESTAURANT</strong> - –†–µ—Å—Ç–æ—Ä–∞–Ω—ã</li>
                <li><strong>ACTIVITY</strong> - –ê–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏</li>
            </ul>
        </div>

        <div class="api-section">
            <h2>‚≠ê –°–∏—Å—Ç–µ–º–∞ —Ä–µ–π—Ç–∏–Ω–≥–æ–≤</h2>
            <p>–†–µ–π—Ç–∏–Ω–≥ –æ—Ç <span class="rating">1</span> –¥–æ <span class="rating">5</span> –∑–≤–µ–∑–¥:</p>
            <ul>
                <li><span class="rating">1</span> - –û—á–µ–Ω—å –ø–ª–æ—Ö–æ</li>
                <li><span class="rating">2</span> - –ü–ª–æ—Ö–æ</li>
                <li><span class="rating">3</span> - –£–¥–æ–≤–ª–µ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω–æ</li>
                <li><span class="rating">4</span> - –•–æ—Ä–æ—à–æ</li>
                <li><span class="rating">5</span> - –û—Ç–ª–∏—á–Ω–æ</li>
            </ul>
        </div>

        <div class="api-section">
            <h2>üîó –ü–æ–ª–µ–∑–Ω—ã–µ —Å—Å—ã–ª–∫–∏</h2>
            <p><a href="/actuator/health" target="_blank">Health Check</a> - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è —Å–µ—Ä–≤–∏—Å–∞</p>
            <p><a href="/actuator" target="_blank">Actuator</a> - –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –º–µ—Ç—Ä–∏–∫–∏</p>
            <p><a href="/h2-console" target="_blank">H2 Console</a> - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (JDBC URL: jdbc:h2:mem:testdb)</p>
        </div>
    </div>

    <script>
        const API_BASE = '/api/reviews';
        const resultDiv = document.getElementById('result');

        async function makeRequest(url, method = 'GET', body = null) {
            try {
                const options = {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                };
                
                if (body) {
                    options.body = JSON.stringify(body);
                }

                const response = await fetch(url, options);
                const data = await response.json();
                
                resultDiv.textContent = JSON.stringify(data, null, 2);
            } catch (error) {
                resultDiv.textContent = '–û—à–∏–±–∫–∞: ' + error.message;
            }
        }

        function getAllReviews() {
            makeRequest(API_BASE);
        }

        function getReviewById(id) {
            makeRequest(`${API_BASE}/${id}`);
        }

        function createReview() {
            const review = {
                content: "–ü—Ä–µ–≤–æ—Å—Ö–æ–¥–Ω—ã–π —Ä–µ—Å—Ç–æ—Ä–∞–Ω! –í–∫—É—Å–Ω–∞—è –µ–¥–∞ –∏ –æ—Ç–ª–∏—á–Ω–æ–µ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ.",
                rating: 5,
                userId: 3,
                reviewableId: 2,
                reviewType: "RESTAURANT"
            };
            makeRequest(API_BASE, 'POST', review);
        }

        function getReviewsByUser(userId) {
            makeRequest(`${API_BASE}/user/${userId}`);
        }

        function getReviewsByType(reviewType) {
            makeRequest(`${API_BASE}/type/${reviewType}`);
        }

        function getAverageRating(reviewableId, reviewType) {
            makeRequest(`${API_BASE}/reviewable/${reviewableId}/type/${reviewType}/average`);
        }

        function getReviewCount(reviewableId, reviewType) {
            makeRequest(`${API_BASE}/reviewable/${reviewableId}/type/${reviewType}/count`);
        }
    </script>
</body>
</html>
