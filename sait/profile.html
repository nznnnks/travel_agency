<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Профиль — Travelio</title>
<link rel="stylesheet" href="styles.css">
</head>
<body>
<header>
<div class="container">
<div class="logo">Travelio</div>
<nav>
<a href="index.html">О нас</a>
<a href="routes.html">Маршруты</a>
<a href="reviews.html">Отзывы</a>
<a href="profile.html">Профиль</a>
<a href="companions.html">Попутчики</a>
</nav>
</div>
</header>

<section class="profile">
<div class="container">
<h2>Мой профиль</h2>
<div class="profile-content">
<div class="profile-info">
<div class="profile-avatar">
<div class="avatar-placeholder">
<span id="userInitials">П</span>
</div>
</div>
<div class="profile-details">
<h3 id="userFullName">Загрузка...</h3>
<p id="userEmail">Загрузка...</p>
<p id="userPhone">Загрузка...</p>
<p id="userRole">Загрузка...</p>
</div>
</div>
<div class="profile-actions">
<button class="btn btn-secondary" onclick="logout()">Выйти из аккаунта</button>
</div>
</div>
</div>
</section>

<footer>
<p>&copy; 2025 Travelio</p>
</footer>
<script src="api-integration.js"></script>
<script>
// Загрузка профиля пользователя
async function loadUserProfile() {
    try {
        const user = await window.travelioAPI.getCurrentUser();
        displayUserProfile(user);
    } catch (error) {
        console.error('Error loading profile:', error);
        // Если пользователь не авторизован, перенаправляем на регистрацию
        window.location.href = 'register.html';
    }
}

// Отображение профиля пользователя
function displayUserProfile(user) {
    document.getElementById('userFullName').textContent = `${user.firstName} ${user.lastName}`;
    document.getElementById('userEmail').textContent = user.email;
    document.getElementById('userPhone').textContent = user.phone || 'Не указан';
    document.getElementById('userRole').textContent = `Роль: ${user.role}`;
    
    // Инициалы для аватара
    const initials = `${user.firstName.charAt(0)}${user.lastName.charAt(0)}`.toUpperCase();
    document.getElementById('userInitials').textContent = initials;
}

// Выход из системы
function logout() {
    if (confirm('Вы уверены, что хотите выйти из аккаунта?')) {
        window.travelioAPI.logout();
        window.location.href = 'index.html';
    }
}

// Проверка авторизации при загрузке страницы
document.addEventListener('DOMContentLoaded', function() {
    if (!window.travelioAPI.isAuthenticated()) {
        window.location.href = 'register.html';
    } else {
        loadUserProfile();
    }
});
</script>
</body>
</html>








